import{c as T}from"./cart-bJv941xm.js";import{_ as G,R as Q,o as b,h as R,w as N,c as D,i as B,d as H,b as t,t as f,F as P,r as $,m as j,a as tt,g as S}from"./index-YU522o6f.js";import{g as I,b as st,S as et,a as at,P as ot,A as it}from"./autoplay-kb9BjMdU.js";import{M as rt}from"./bootstrap.esm-l9cKv-78.js";import{a as L}from"./axios-G2rPRu76.js";import"./sweetalert2.all-eK8a_lGc.js";import"./_commonjsHelpers-1J56E-h6.js";function nt(s){const{effect:a,swiper:e,on:h,setTranslate:o,setTransition:n,overwriteParams:p,perspective:l,recreateShadows:d,getEffectParams:c}=s;h("beforeInit",()=>{if(e.params.effect!==a)return;e.classNames.push(`${e.params.containerModifierClass}${a}`),l&&l()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const r=p?p():{};Object.assign(e.params,r),Object.assign(e.originalParams,r)}),h("setTranslate",()=>{e.params.effect===a&&o()}),h("setTransition",(r,_)=>{e.params.effect===a&&n(_)}),h("transitionEnd",()=>{if(e.params.effect===a&&d){if(!c||!c().slideShadows)return;e.slides.forEach(r=>{r.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(_=>_.remove())}),d()}});let i;h("virtualUpdate",()=>{e.params.effect===a&&(e.slides.length||(i=!0),requestAnimationFrame(()=>{i&&e.slides&&e.slides.length&&(o(),i=!1)}))})}function lt(s,a){const e=I(a);return e!==a&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function U(s,a,e){const h=`swiper-slide-shadow${e?`-${e}`:""}${s?` swiper-slide-shadow-${s}`:""}`,o=I(a);let n=o.querySelector(`.${h.split(" ").join(".")}`);return n||(n=st("div",h.split(" ")),o.append(n)),n}function dt(s){let{swiper:a,extendParams:e,on:h}=s;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),nt({effect:"coverflow",swiper:a,on:h,setTranslate:()=>{const{width:p,height:l,slides:d,slidesSizesGrid:c}=a,i=a.params.coverflowEffect,r=a.isHorizontal(),_=a.translate,X=r?-_+p/2:-_+l/2,V=r?i.rotate:-i.rotate,Y=i.depth;for(let v=0,W=d.length;v<W;v+=1){const u=d[v],x=c[v],Z=u.swiperSlideOffset,O=(X-Z-x/2)/x,m=typeof i.modifier=="function"?i.modifier(O):O*i.modifier;let w=r?V*m:0,g=r?0:V*m,E=-Y*Math.abs(m),y=i.stretch;typeof y=="string"&&y.indexOf("%")!==-1&&(y=parseFloat(i.stretch)/100*x);let k=r?0:y*m,A=r?y*m:0,q=1-(1-i.scale)*Math.abs(m);Math.abs(A)<.001&&(A=0),Math.abs(k)<.001&&(k=0),Math.abs(E)<.001&&(E=0),Math.abs(w)<.001&&(w=0),Math.abs(g)<.001&&(g=0),Math.abs(q)<.001&&(q=0),a.browser&&a.browser.need3dFix&&(Math.abs(w)/90%2===1&&(w+=.001),Math.abs(g)/90%2===1&&(g+=.001));const J=`translate3d(${A}px,${k}px,${E}px)  rotateX(${g}deg) rotateY(${w}deg) scale(${q})`,K=lt(i,u);if(K.style.transform=J,u.style.zIndex=-Math.abs(Math.round(m))+1,i.slideShadows){let C=r?u.querySelector(".swiper-slide-shadow-left"):u.querySelector(".swiper-slide-shadow-top"),M=r?u.querySelector(".swiper-slide-shadow-right"):u.querySelector(".swiper-slide-shadow-bottom");C||(C=U("coverflow",u,r?"left":"top")),M||(M=U("coverflow",u,r?"right":"bottom")),C&&(C.style.opacity=m>0?m:0),M&&(M.style.opacity=-m>0?-m:0)}}},setTransition:p=>{a.slides.map(d=>I(d)).forEach(d=>{d.style.transitionDuration=`${p}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${p}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}const ct={props:["otherClassData"],components:{Swiper:et,SwiperSlide:at,RouterLink:Q},setup(){return{modules:[dt,ot,it]}},methods:{changPage(s){this.$emit("chang-page",s)}}},ht={class:"card bg-primary border-0 pt-4"},ft={class:"d-flex justify-content-center"},pt={class:"d-flex justify-content-center align-items-center border rounded-circle border-secondary"},mt=["src"],ut={class:"card-body text-center p-0 mt-5"},_t={class:"card-title fs-4"},bt={class:"mt-8 mb-6"},wt={class:"card-text fs-6"},gt=t("div",{class:"card-footer text-center bg-secondary text-white"}," 課程連結 ",-1);function yt(s,a,e,h,o,n){const p=$("RouterLink"),l=$("swiper-slide"),d=$("swiper");return b(),R(d,{slidesPerView:1,spaceBetween:30,loop:!0,pagination:{clickable:!0},autoplay:{delay:2500,disableOnInteraction:!1},navigation:!0,modules:h.modules,class:"mySwiper"},{default:N(()=>[(b(!0),D(P,null,B(e.otherClassData,(c,i)=>(b(),R(l,{key:i,onClick:r=>n.changPage(c.id)},{default:N(()=>[H(p,{to:`/product/${c.id}`},{default:N(()=>[t("div",ht,[t("div",ft,[t("div",pt,[t("img",{src:c.imageUrl,class:"card-img-top rounded-circle card-img p-5",alt:"導師照片"},null,8,mt)])]),t("div",ut,[t("h2",_t,f(c.title),1),t("div",bt,[t("p",wt,f(c.description),1)])]),gt])]),_:2},1032,["to"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules"])}const vt=G(ct,[["render",yt]]);var Ct={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_API_NAME:"ssozr",BASE_URL:"/vue2024week62/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:z,VITE_APP_API_NAME:F}=Ct,Mt={data(){return{classData:{},otherClassData:[],id:"",goCart:!1,category:"",addModal:"",qtyNum:1,mToast:""}},components:{SwiperClassVue:vt},methods:{getClassData(){L.get(`${z}/v2/api/${F}/product/${this.id}`).then(s=>{this.classData=s.data.product,this.category=s.data.product.category,this.getOtherClassData()}).catch(()=>{})},getOtherClassData(){L.get(`${z}v2/api/${F}/products/?category=${this.category}`).then(s=>{this.otherClassData=s.data.products,this.filteredItems()}).catch(()=>{})},openAddModal(){this.addModal.show()},hideAddModal(){this.addModal.hide()},...j(T,["addCart"]),...j(T,["changeGoCart"]),formatNumber(s){if(s)return s.toLocaleString()},filteredItems(){const s=[],a=this.id;this.otherClassData.forEach(function(e){e.id!==a&&s.push(e)}),this.otherClassData=s},changPage(s){this.id=s,this.$router.push(`/product/${s}`),this.getClassData(),window.scrollTo(0,0)},qty(s){this.qtyNum=s},addCartBtnChange(){this.addCarBtn=!0}},computed:{...tt(T,["addCartBtn"])},mounted(){console.log(this.$refs);const{id:s}=this.$route.params;this.id=s,this.getClassData(),this.addModal=new rt(this.$refs.addModal)}},St={class:"container mt-30 mb-15 teacher","data-aos":"fade-right"},Dt={class:"row"},Pt={class:"text-center p-0 mb-10 col-8 offset-2"},$t=["src"],xt={class:"mb-10"},Et={class:"border-bottom border-primary border-3 pb-3"},kt={class:"fs-6 mt-lg-0 mt-3 ps-lg-5 d-inline-block"},At={class:"row flex-lg-row-reverse"},qt={class:"col-lg-4 text-center"},Tt=["src"],Nt={class:"mb-6 mb-lg-0"},Bt={class:"col-lg-8 d-flex flex-column justify-content-between"},It={class:"fs-4 mb-lg-15 mb-8"},Vt={class:"d-lg-flex text-lg-start text-center justify-content-between align-items-end"},Ot={class:"p-0 m-0"},Rt={class:"fs-4"},jt={class:"ms-4"},Lt={class:"fs-4 m-0"},Ut={class:"ms-4"},zt={class:"d-lg-flex mt-3"},Ft={class:"d-flex justify-content-center mb-md-0 mb-3"},Gt=["disabled"],Ht={class:"dropdown"},Xt={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Yt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Wt=["onClick"],Zt={class:"my-15 my-md-30 container","data-aos":"fade-right"},Jt=t("h2",{class:"border-bottom border-primary border-3 pb-3"},"相關課程",-1),Kt={class:"modal",tabindex:"-1",ref:"addModal"},Qt={class:"modal-dialog"},ts={class:"modal-content"},ss=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"選擇購買數量"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),es={class:"modal-body"},as={class:"dropdown"},os={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},is={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},rs=["onClick"],ns={class:"modal-footer"},ls=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function ds(s,a,e,h,o,n){const p=$("SwiperClassVue");return b(),D(P,null,[t("div",St,[t("div",Dt,[t("div",Pt,[t("img",{src:o.classData.imagesUrl,class:"imgI",alt:"課程示意圖"},null,8,$t)]),t("div",xt,[t("h2",Et,[S(f(o.classData.title)+" ",1),t("span",kt,f(o.classData.description),1)])]),t("div",At,[t("div",qt,[t("img",{src:o.classData.imageUrl,alt:"老師照片",class:"card-img rounded-circle mb-4"},null,8,Tt),t("h3",Nt,"授課老師:"+f(o.classData.unit),1)]),t("div",Bt,[t("p",It,f(o.classData.content),1),t("div",Vt,[t("ul",Ot,[t("li",null,[t("p",Rt,[S("課程堂數:"),t("span",jt,f(o.classData.origin_price)+"堂",1)])]),t("li",null,[t("p",Lt,[S("課程總額:"),t("span",Ut,"NT$"+f(n.formatNumber(o.classData.price)),1)])])]),t("div",zt,[t("div",Ft,[t("button",{type:"button",class:"btn btn-primary me-3",onClick:a[0]||(a[0]=l=>s.addCart(o.classData,o.qtyNum)),disabled:s.addCartBtn},"加入購物車",8,Gt),t("div",Ht,[t("button",Xt,f(o.qtyNum),1),t("ul",Yt,[(b(),D(P,null,B(20,(l,d)=>t("li",{key:d},[t("a",{class:"dropdown-item",onClick:c=>n.qty(l)},f(l),9,Wt)])),64))])])]),t("button",{type:"button",class:"btn btn-primary ms-6",onClick:a[1]||(a[1]=l=>s.changeGoCart(o.classData,n.qty))},"立即上課")])])])])])]),t("div",Zt,[Jt,H(p,{"other-class-data":o.otherClassData,onChangPage:n.changPage},null,8,["other-class-data","onChangPage"])]),t("div",Kt,[t("div",Qt,[t("div",ts,[ss,t("div",es,[t("div",as,[S(" 購買數量: "),t("button",os,f(o.qtyNum),1),t("ul",is,[(b(),D(P,null,B(20,(l,d)=>t("li",{key:d},[t("a",{class:"dropdown-item",onClick:c=>n.qty(l)},f(l),9,rs)])),64))])])]),t("div",ns,[ls,t("button",{type:"button",class:"btn btn-primary",onClick:a[2]||(a[2]=l=>(s.addCart(o.classData,o.qtyNum),n.hideAddModal()))},"加入購物車")])])])],512)],64)}const bs=G(Mt,[["render",ds]]);export{bs as default};
